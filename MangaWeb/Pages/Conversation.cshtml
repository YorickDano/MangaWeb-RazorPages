@page
@model MangaWeb.Pages.MessageModel
@{
}
<head>
    <style>
        .chat-box {
            width: 1000px;
            min-height: 600px;
            overflow-y: scroll;
            padding: 10px;
            border: 1px solid gray;
            margin: 0 auto;
            display: block;
            max-height: 680px;
        }

        /* style for each message bubble */
        .message-bubble {
            color: rgb(240,240,240);
            font-size: 28px;
            font-weight: 600;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 20px;
            max-width: 60%;
            display: block;
            clear: both;
        }

            /* align messages to the right */
            .message-bubble.right {
                background-color: rgb(45,45,45);
                float: right;
            }

            .message-bubble.left {
                background-color: rgb(25,25,25);
                float: left;
            }

        .input-container {
            width: 1000px;
            display: flex;
            justify-content: center;
            text-align: center;
            margin: 20px auto;
        }

        .messageInput {
            color: rgb(240,240,240);
            font-size: 28px;
            font-weight: 600;
            width: 85%;
            background-color: rgb(40,40,40);
            margin-bottom: 7px;
            margin-right: 10px;
            margin-top: 3px;
        }

        .chat-box::-webkit-scrollbar {
            width: 15px;
        }

        .chat-box::-webkit-scrollbar-track {
            background-color: rgb(25,25,25);
            border-radius: 80px;
        }

        .chat-box::-webkit-scrollbar-thumb {
            background-color: rgb(55,55,55);
            border-radius: 80px;
        }

        .timeChat {
            display: inline;
            color: rgb(150,150,150);
            font-size: 14px;
        }

        .chat-head {
            width: 1000px;
            display: flex;
            align-items: center;
            margin: 0 auto;
            padding: 10px;
            background-color: rgba(25,25,25,.2);
            border-bottom: 1px solid #ccc;
        }

            .chat-head img {
                width: 90px;
                height: 90px;
                border-radius: 50%;
                margin-right: 10px;
            }

        .user-name {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
        }
    </style>
</head>
<body>
 
        <div class="chat-head">
            <img src="@Model.UserWriteToImageSrc" alt="User Avatar">
            <h3 class="user-name">@Model.UserWriteToName</h3>
        </div>

    <div class="chat-box">

        @if (Model.Conversation.Messages is not null)
        {
            @foreach (var message in Model.Conversation.Messages)
            {
                <div class="message-bubble
            @(message.UserNameFrom == Model.CurrentUserName ? "right" : "left")">
                    @message.Body
                    <div class="timeChat">@message.DateTime.ToShortTimeString() @message.DateTime.ToShortDateString()</div>
                </div>
            }
        }
    </div>
    <form method="post">
        <div class="input-container">
            <input name="userNameWriteTo" hidden value="@(Model.Conversation.FirstUserName == Model.CurrentUserName
                ? Model.Conversation.SecondUserName : Model.Conversation.FirstUserName)" />
            <input class="messageInput" type="text" id="message-input" name="messageInput" placeholder="Write a message..." />
            <input asp-page-handler="SendMessage" type="submit" class="w-15 btn btn-lg btn-primary" value="Send">
        </div>
    </form>
</body>