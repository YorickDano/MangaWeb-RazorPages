@page
@model MangaWeb.Pages.Manga_s_.IndexModel

@{
    ViewData["Title"] = "Index";
}

<h1>@ViewData["Title"]</h1>


<p>
    <a asp-page="Create">Create New</a>
</p>
<form>
    <p>
        <select asp-for="MangaGenre" asp-items="Model.Genres">
            <option value="">All</option>
        </select>
        Title: <input type="text" asp-for="SearchString" />
        <input type="submit" value="Filter" />
    </p>

</form>


<div class="mangas">
@foreach (var item in Model.Manga)
{

    <div class="manga-card">
        <a class="text-decoration-none" asp-page="./ExpandedManga" asp-route-id="@item.Id"><img src="@item.MainImageUrl"><div class="manga-card-text">@Html.DisplayFor(modelItem => item.Title)</div></a>
    </div>

}
</div>
<h2 class="text-black">Expanded Manga</h2>
<h6>
    <form>
        Sort by:
        <select asp-for="SortByOption">
            <option>Title</option>
            <option>Score</option>
        </select>
        <input asp-page-handler="SortBy" class="w-100 btn btn-lg btn-primary" type="submit" value="Sort" />
    </form>
</h6>
<div class="mangas">
@foreach (var item in Model.FullManga)
{

        <div id="@item.Id" onmouseover="onMangaHover(@item.Id)" onmouseout="onMangaOut()" class="manga-card">
        <a class="text-decoration-none" asp-page="./ExpandedManga" asp-route-id="@item.Id"><img src="@item.MangaImageUrl"><div class="manga-card-text">@Html.DisplayFor(modelItem => item.OriginTitle)</div></a>
    </div>

}
</div>
<div id="mangaInfo" class="mangaInforOnHover">
    Info
</div>
<script>
    function onMangaHover(itemId)
    {
        var manga = document.getElementById(itemId);
        var mangaInfoStyle = document.getElementById("mangaInfo").style;
        mangaInfoStyle.display = "block";
      
        console.log("left: " + manga.offsetLeft + "\ntop: " + manga.offsetTop);
        mangaInfoStyle.left = (manga.offsetLeft + 275) + "px";
        mangaInfoStyle.top = (manga.offsetTop)+"px";
    }

    function onMangaOut() 
    {
        document.getElementById("mangaInfo").style.display = "none";

    }
</script>